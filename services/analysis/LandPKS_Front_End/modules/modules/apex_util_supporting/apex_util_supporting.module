<?php/** * NGUYEN HAI THANH * Enter description here ... * @param $category_id *//* * Function is used to check null of input data * Author : NGUYEN HAI THANH * THANHNH */function isEmpty($variable){  if (is_null($variable)==true){    return true;  } else if (trim($variable) == "") {    return true;  } else if (!isset($variable)) {    return true;  } else {    return false;  }}/** * NGUYEN HAI THANH * Enter description here ... * @param $type * @param $mess */function error_request_from_external_device($type, $mess){  if ($type == 666 || $type == '666'){    $data = array('http_response_code'=>200,'response_code'=>200,'grass_productivity'=>0,'grass_erosion'=>0,'maize_productivity'=>0,'maize_erosion'=>0,'crop_productivity'=>0,'crop_erosion'=>$crop_ero,'record_name'=>'NA','record_id'=>'NA');    header('Content-Type: application/json');    header_remove('X-Powered-By');    header_remove('Server');    echo json_encode($data);  } else {    $data = array('http_response_code'=>417,'response_code'=>417,'reason'=>$mess, 'type'=>$type);    header('Content-Type: application/json');    header_remove('X-Powered-By');    header_remove('Server');    http_response_code(417);    echo json_encode($data) ;  }}function standard_string_2($string) {  $string = str_replace(" ","",$string);  return $string;}function standard_string_prevent_sql_injection($string){  $string = trim($string);  $string = str_replace("'","",$string);  $string = str_replace('"','',$string);  $string = strip_tags($string);  while (strpos($string,'  ') !== false)  {    $string = str_replace('  ',' ',$string);  }  return $string;}/** * * Check IP Address To Top-Up CMS Account Comes from SMS Center OR NOT */function check_ip_from_transcode($ip_address){  $result = db_query("SELECT 1 as rs FROM system_parameter WHERE sys_para_code LIKE '%TRANSCODE_SERVER_IP%' AND sys_para_value = '". $ip_address ."'");  foreach ($result as $record){    return $record->rs;  }  return 0;}/** * NGUYEN HAI THANH * Check Program ID exits or NOT * @param unknown_type $program_id */function check_exits_program_id($program_id){  $result = db_query("SELECT 1 as rs FROM node WHERE type='program' AND nid=:program_id",array(':program_id'=>$program_id));  foreach ($result as $record){    return $record->rs;  }  return 0;}/** * NGUYEN HAI THANH * Check Program ID exits or NOT * @param unknown_type $program_id */function check_exits_channel_id($channel_id){  $result = db_query("SELECT 1 as rs FROM node WHERE type='channel' AND nid=:channel_id",array(':channel_id'=>$channel_id));  foreach ($result as $record){    return $record->rs;  }  return 0;}/** * NGUYEN HAI THANH * Check user account is Normal User or NOT * @param $user */function is_Normal_User($uid){  /* Check exit user */  $kt_exit = check_exit_user_id($uid);  if (!$kt_exit){    return false;  } else {    /* Check role of user */    $results = db_query("SELECT DISTINCT(1) as rs FROM users_roles WHERE :uid NOT IN (SELECT uid FROM users_roles)", array(':uid'=>$uid));    foreach ($results as $record){      return true;    }    $results = db_query("SELECT DISTINCT(1) as rs FROM users_roles WHERE uid = :uid AND rid NOT IN (1,3,4,5)", array(':uid'=>$uid));    foreach ($results as $record){      return true;    }    return false;  }}/** * NGUYEN HAI THANH * Check the exits of user_id in System * @param unknown_type $user_id */function check_exit_user_id($user_id){  $result = db_query("SELECT 1 as rs FROM users WHERE uid = :uid", array(':uid'=>$user_id));  foreach ($result as $record){    return $record->rs;  }  return 0;}/** * NGUYEN HAI THANH * Enter description here ... * @param unknown_type $content */function success_api_rhm($content) {   //$data = array('response_code'=>200,'bare_ground_1_percent'=>$content->bare_ground_1_percent,'veg_cover_percent'=>$content->veg_cover_percent,'bare_ground_2_percent'=>$content->bare_ground_2,'perennial_grass_percent'=>$content->perennial_grasses,'tree_percent'=>$content->tree,'shrub_percent'=>$content->shrubs,'sub_shrub_percent'=>$content->sub_shrubs,'annual_percent'=>$content->annual,'herb_litter_percent'=>$content->herb_litter,'wood_litter_percent'=>$content->wood_litter,'rock_percent'=>$content->rock,'canopy_gap_percent'=>$content->canopy_gap_percent,'basal_gap_percent'=>$content->basal_gap_percent,'species_1_density_percent'=>$content->species_1_density_percent,'species_2_density_percent'=>$content->species_2_density_percent,'canopy_height_smaller_10_cm'=>$content->canopy_height_smaller_10_cm,'canopy_height_10_50_cm'=>$content->canopy_height_10_50_cm,'canopy_height_50cm_1m'=>$content->canopy_height_50cm_1m,'canopy_height_1m_2m'=>$content->canopy_height_1m_2m,'canopy_height_2m_3m'=>$content->canopy_height_2m_3m,'canopy_height_greater_3m'=>$content->canopy_height_greater_3m);   $data = array('http_response_code'=>200,'response_code'=>200,'insertion_successful'=>TRUE);   header('Content-Type: application/json');   header_remove('X-Powered-By');   header_remove('Server');   echo json_encode($data);}/** * NGUYEN HAI THANH * Return when payment process is successful ... */function success_api($type,$content){  if ($type == 0){    $data = array('http_response_code'=>200,'response_code'=>200);    header('Content-Type: application/json');    header_remove('X-Powered-By');    header_remove('Server');    echo json_encode($data) ;  } else if ($type == 1) {    $data = array('http_response_code'=>200,'response_code'=>200,'grass_productivity'=>$content[0]->grass_productivity,'grass_erosion'=>$content[0]->grass_erosion,'maize_productivity'=>$content[0]->maize_productivity,'maize_erosion'=>$content[0]->maize_erosion,'crop_productivity'=>$content[0]->maize_productivity,'crop_erosion'=>$content[0]->maize_erosion,'gdal_elevation'=>$content[0]->gdal_elevation,'gdal_fao_lgp'=>$content[0]->gdal_fao_lgp,'gdal_aridity_index'=>$content[0]->gdal_aridity_index,'awc_soil_profile_awc'=>$content[0]->awc_soil_profile_awc,'climate_precip_january'=>$content[0]->climate_precip_jan,'climate_precip_february'=>$content[0]->climate_precip_feb,'climate_precip_march'=>$content[0]->climate_precip_mar,'climate_precip_april'=>$content[0]->climate_precip_apr,'climate_precip_may'=>$content[0]->climate_precip_may,'climate_precip_june'=>$content[0]->climate_precip_jun,'climate_precip_july'=>$content[0]->climate_precip_jul,'climate_precip_august'=>$content[0]->climate_precip_aug,'climate_precip_september'=>$content[0]->climate_precip_sep,'climate_precip_october'=>$content[0]->climate_precip_oct,'climate_precip_november'=>$content[0]->climate_precip_nov,'climate_precip_december'=>$content[0]->climate_precip_dec,'climate_precip_average_annual'=>$content[0]->climate_precip_annual,'climate_avg_temp_january'=>$content[0]->climate_avg_temp_jan,'climate_avg_temp_february'=>$content[0]->climate_avg_temp_feb,'climate_avg_temp_march'=>$content[0]->climate_avg_temp_mar,'climate_avg_temp_april'=>$content[0]->climate_avg_temp_apr,'climate_avg_temp_may'=>$content[0]->climate_avg_temp_may,'climate_avg_temp_june'=>$content[0]->climate_avg_temp_jun,'climate_avg_temp_july'=>$content[0]->climate_avg_temp_jul,'climate_avg_temp_august'=>$content[0]->climate_avg_temp_aug,'climate_avg_temp_september'=>$content[0]->climate_avg_temp_sep,'climate_avg_temp_october'=>$content[0]->climate_avg_temp_oct,'climate_avg_temp_november'=>$content[0]->climate_avg_temp_nov,'climate_avg_temp_december'=>$content[0]->climate_avg_temp_dec,'climate_max_temp_january'=>$content[0]->climate_max_temp_jan,'climate_max_temp_february'=>$content[0]->climate_max_temp_feb,'climate_max_temp_march'=>$content[0]->climate_max_temp_mar,'climate_max_temp_april'=>$content[0]->climate_max_temp_apr,'climate_max_temp_may'=>$content[0]->climate_max_temp_may,'climate_max_temp_june'=>$content[0]->climate_max_temp_jun,'climate_max_temp_july'=>$content[0]->climate_max_temp_jul,'climate_max_temp_august'=>$content[0]->climate_max_temp_aug,'climate_max_temp_september'=>$content[0]->climate_max_temp_sep,'climate_max_temp_october'=>$content[0]->climate_max_temp_oct,'climate_max_temp_november'=>$content[0]->climate_max_temp_nov,'climate_max_temp_december'=>$content[0]->climate_max_temp_dec,'climate_min_temp_january'=>$content[0]->climate_min_temp_jan,'climate_min_temp_february'=>$content[0]->climate_min_temp_feb,'climate_min_temp_march'=>$content[0]->climate_min_temp_mar,'climate_min_temp_april'=>$content[0]->climate_min_temp_apr,'climate_min_temp_may'=>$content[0]->climate_min_temp_may,'climate_min_temp_june'=>$content[0]->climate_min_temp_jun,'climate_min_temp_july'=>$content[0]->climate_min_temp_jul,'climate_min_temp_august'=>$content[0]->climate_min_temp_aug,'climate_min_temp_september'=>$content[0]->climate_min_temp_sep,'climate_min_temp_october'=>$content[0]->climate_min_temp_oct,'climate_min_temp_november'=>$content[0]->climate_min_temp_nov,'climate_min_temp_december'=>$content[0]->climate_min_temp_dec,'record_name'=>$content[0]->name,'record_id'=>$content[0]->ID);    header('Content-Type: application/json');    header_remove('X-Powered-By');    header_remove('Server');    echo json_encode($data);  }}/** * NGUYEN HAI THANH * Get IPaddress of client */function get_ip_address_client(){  return $_SERVER['REMOTE_ADDR'];}